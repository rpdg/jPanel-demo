<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title></title>
    
<style type="text/css">
	body {
		background-color: transparent;
		margin: 0px;
	}

	#divTest2 {
		width: 160px;
		height: 40px;
		background: #fdf7bb;
		position: absolute;
		top: 300px;
		left: 20px;
		display: -webkit-box;
		-webkit-box-orient: horizontal;
		overflow: hidden;
		white-space: nowrap;
		padding: 0px;
	}

	.divItem,
	.divNullPad {
		width: 40px;
		height: 40px;
		margin: 0px 0px;
		display: inline-block;
		-webkit-transition-property: all;
		-webkit-transition-duration: 200ms;
	}

	#divHelper {
		width: 40px;
		height: 40px;
		background-color: #874976;
		position: absolute;
		display: none;
		z-index: 999;
		opacity: 0.4;
		-webkit-transition-property: left top;
		-webkit-transition-duration: 200ms;
		-webkit-transition-timing-function: ease-out;
	}

	#divHelper2 {
		width: 40px;
		height: 40px;
		border: 2px solid #ff0000;
		position: absolute;
		display: none;
		z-index: 999;
		-webkit-transition-property: left top;
		-webkit-transition-duration: 200ms;
		-webkit-transition-timing-function: ease-out;
	}

	#dWrap {
		position: absolute;
		top: 51px;
		left: 220px;
		padding: 0px;
		width: 290px;
		height: 120px;
		overflow: hidden;
	}

	#divTest {
		margin-top: 0px;
		width: 290px;
		height: 200px;
		display: -webkit-box;
		-webkit-box-orient: horizontal;
		-webkit-transition-property: all;
		-webkit-transition-duration: 200ms;
	}

	#divTest>.divItem,
	.divNullPad {
		opacity: 0.3;
		background: #d5d9ea;
		margin: 0;
		padding: 0;
	}

	#divTest>.curRow {
		opacity: 1;
		background: #d0d5e8;
	}

	.z0 {
		margin: 3px;
		width: 32px;
		height: 32px;
	}

	.z1 {
		margin: 3px;
		width: 32px;
		height: 32px;
		-webkit-transform: scale(1.2);
		-webkit-transition-property: all;
		-webkit-transition-duration: 200ms;
		background: #cc66cc;
	}
</style>
<style type="text/css">a:hover { color: red; }

/*# sourceMappingURL=index.css.map */</style>

</head>

<body>
    
<div id="dWrap">
	<div id="divTest">
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div id="item_0" class="divItem curRow">0</div>
		<div id="item_1" class="divItem curRow">1</div>
		<div id="item_2" class="divItem curRow">2</div>
		<div id="item_3" class="divItem curRow">3</div>
		<div id="item_4" class="divItem curRow">4</div>
		<div id="item_5" class="divItem curRow">5</div>
		<div id="item_6" class="divItem curRow">6</div>
		<div id="item_7" class="divItem">7</div>
		<div id="item_8" class="divItem">8</div>
		<div id="item_9" class="divItem">9</div>
		<div id="item_10" class="divItem">10</div>
		<div id="item_11" class="divItem">11</div>
		<div id="item_12" class="divItem">12</div>
		<div id="item_13" class="divItem">13</div>
		<div id="item_14" class="divItem">14</div>
		<div id="item_15" class="divItem">15</div>
		<div id="item_16" class="divItem">16</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
		<div class="divNullPad">&nbsp;</div>
	</div>
</div>
<div id="divHelper"></div>
<div id="divTest2">
	<div class="divItem current">
		<div class="z0">b0</div>
	</div>
	<div class="divItem current">
		<div class="z0">b1</div>
	</div>
	<div class="divItem current">
		<div class="z0">b2</div>
	</div>
	<div class="divItem current">
		<div class="z0">b3</div>
	</div>
	<div class="divItem">
		<div class="z0">b4</div>
	</div>
	<div class="divItem">
		<div class="z0">b5</div>
	</div>
	<div class="divItem">
		<div class="z0">b6</div>
	</div>
	<div class="divItem">
		<div class="z0">b7</div>
	</div>
</div>
<div id="divHelper2"></div>
<hr>
<div id="divLineView"
	style="position:absolute;top:90px; left: 210px;border:1px solid red;border-width:1px 0px; width: 320px; height:40px;">
</div>



    <script src='./js/epg.min_3cfe18b.js'></script>
    <script>/// <reference types="@rpdg/epg-panel" />
x$.log.active(true);
let a = x$
    .grid('#divTest>.curRow', {
    cols: 7,
    frameId: 'divHelper',
    edgeRule: {
        down: function () {
            let nodeIdIndex = parseInt(a.selectedElement.id.substr(5), 10);
            if (nodeIdIndex + a.cols < a.ex.divItemLength) {
                a.ex.overCount++;
                for (let i = 0, len = a.items.length; i < len; i++) {
                    a.items[i].className = 'divItem';
                    if (i + a.ex.overCount * a.cols < a.ex.dataItems.length) {
                        a.ex.dataItems[i + a.ex.overCount * this.cols].className = 'divItem curRow';
                    }
                }
                a.ex.container.style.marginTop = -40 * a.ex.overCount + 'px';
                a.reset(a.selectedIndex);
                //console.log('down:---' , this.items);
            }
        },
        up: function () {
            let nodeIdIndex = parseInt(a.selectedElement.id.substr(5), 10);
            if (a.ex.overCount > 0) {
                a.ex.overCount--;
                for (let i = 0, len = a.items.length; i < len; i++) {
                    a.items[i].className = 'divItem';
                }
                let t = ((nodeIdIndex / a.cols) | 0) - 1;
                for (let j = 0; j < a.cols; j++) {
                    a.ex.dataItems[t * a.cols + j].className = 'divItem curRow';
                }
                a.ex.container.style.marginTop = -40 * a.ex.overCount + 'px';
                a.reset(a.selectedIndex);
                //console.log('up:--- ' , this.items);
            }
        },
        left: function () {
            a.jumpToBox(1);
        },
    },
    onOk: function () {
        console.log(a.selectedIndex, this.selectedElement);
    },
})
    .extra({
    container: document.getElementById('divTest'),
    dataItems: x$.dom.select('#divTest>.divItem'),
    overCount: 0,
    divItemLength: 17,
});
let b = x$
    .grid('#divTest2>.current', {
    cols: 4,
    frameId: 'divHelper2',
    offset: { x: -2, y: -2 },
    forceRec: { w: 40, h: 40, x: 17, y: 297 },
    onChange: function (w) {
        if (w != 'auto') {
            let obj = b.selectedElement.firstChild;
            obj.className = 'z1';
            obj = b.previousElement;
            if (obj) {
                obj.firstChild.className = 'z0';
            }
        }
    },
    edgeRule: {
        right: function (d) {
            if (this.selectedIndex + b.ex.overCount + 1 < b.ex.fullIemList.length) {
                b.ex.overCount++;
                this.items[0].className = 'divItem';
                b.ex.fullIemList[0].style.marginLeft = -b.ex.overCount * 40 + 'px';
                b.ex.fullIemList[this.selectedIndex + b.ex.overCount].className = 'divItem current';
                this.reset(this.selectedIndex);
                //
                let obj = this.items[this.selectedIndex - 1].firstChild;
                obj.className = 'z0';
            }
        },
        left: function () {
            if (this.selectedIndex + b.ex.overCount - 1 > -1) {
                b.ex.overCount--;
                this.items[this.cols - 1].className = 'divItem';
                b.ex.fullIemList[0].style.marginLeft = -b.ex.overCount * 40 + 'px';
                b.ex.fullIemList[this.selectedIndex + b.ex.overCount].className = 'divItem current';
                this.reset(this.selectedIndex);
                //
                let obj = this.items[this.selectedIndex + 1].firstChild;
                obj.className = 'z0';
            }
        },
        up: function () {
            this.jumpToBox(0);
        },
        down: 'stop',
    },
})
    .extra({
    overCount: 0,
    fullIemList: x$.dom.select('#divTest2>.divItem'),
});
x$.box.addGrid(a, b).active();
</script><!--ignore-->
</body>

</html>